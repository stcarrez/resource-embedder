# Embedding merged properties in Ada

This example shows the `bundle` merge behavior.  This is a specific merge
of a set of files when they come from different directories.

The configuration files are embedded by using the following
command:

```
are --lang=Ada -o src --rule=package.xml --name-access --content-only .
```

The `--lang=Ada` option selects the Ada generator for the output and the
`-o src` option indicates the target directory where files are generated.

The `--rule=package.xml` option indicates to read the `package.xml` file
which describes the rules to collect the resource and embed them.

The XML package uses the `bundle` installation rule and selects the source
files from two directories: `bundles` and `bundles-override`.  Because these
two directories contains similar property files they are merged together.
The properties of the `bundles` directory are overriden by the properties
of the `bundles-override` directory.

```
<package>
  <resource name='Bundle'>
    <install mode='bundle' source-timestamp='yes' strip-extension='yes'>
      <fileset dir="bundles">
        <include name="**/*.properties"/>
      </fileset>
      <fileset dir="bundles-override">
        <include name="**/*.properties"/>
      </fileset>
    </install>
  </resource>
</package>
```

The `bundles` directory contains a file `msg.properties` with:

```
msg_title=Title
msg_description=Generic description
```

and the `bundles-override` directory contains a file `msg.properties` with:

```
msg_description=Product description
```

When both files are merged, the final result becomes:

```
msg_title=Title
msg_description=Product description
```

Note that the `strip-extension` attribute indicates to drop the `.properties`
extension so that the final resource name will be `msg` (and not `msg.properties`).

# Build

Run the command

```
make
```

and this generates:

* src/bundles.ads: specification file file generated by *are*
* src/bundles.adb: embedded configuration file generated by *are*
* show_message: binary that prints the message

The program usage is then:

```
show_message msg
show_message msg_fr
```
